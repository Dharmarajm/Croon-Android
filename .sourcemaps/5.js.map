{"version":3,"sources":["../../src/pages/profile/profile.module.ts","../../src/pages/profile/profile.ts"],"names":[],"mappings":"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","file":"5.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { ProfilePage } from './profile';\n\n@NgModule({\n  declarations: [\n    ProfilePage,\n  ],\n  imports: [\n    IonicPageModule.forChild(ProfilePage),\n  ],\n})\nexport class ProfilePageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/profile/profile.module.ts","import { Component } from '@angular/core';\nimport { IonicPage, NavController, NavParams, Platform, LoadingController, AlertController,App ,Nav} from 'ionic-angular';\n//import { LoginPage } from './../login/login';\nimport { MenuPage } from '../menu/menu';\nimport { ImagePicker } from '@ionic-native/image-picker';\nimport { Base64 } from '@ionic-native/base64';\nimport { VotesProvider } from '../../providers/myvotes/myvotes';\nimport { Toast } from '@ionic-native/toast';\nimport { Globals } from '../../providers/global';\nimport { OneSignal } from '@ionic-native/onesignal';\n\n@IonicPage()\n@Component({\n  selector: 'page-profile',\n  templateUrl: 'profile.html',\n})\nexport class ProfilePage {\n  \n\n  image: any;\n  imgPreview?:any;\n  loading: any;\n  prof_name:any;\n  name: any;\n  data:any;\n  page: any;\n  user_image:any;\n  assignPush:any;\n  getPushData:any;\n  ShowBack:boolean=true;\n\n  constructor(public app:App,public nav:Nav,public navCtrl: NavController, public navParams: NavParams,public platform:Platform, public votes: VotesProvider, private imagePicker: ImagePicker, private base64: Base64, public loadingCtrl: LoadingController, public alertCtrl: AlertController, public menu: MenuPage,private toast: Toast, public global: Globals,private oneSignal:OneSignal) {\n\n      if(localStorage.getItem(\"ProfileShow\")=='true'){\n         this.ShowBack=false;\n      }else{\n         this.ShowBack=true;\n         \n      }\n\n      platform.ready().then(() => {        \n        platform.registerBackButtonAction(() => {\n         if(this.ShowBack==true){\n           this.navCtrl.setRoot(MenuPage);  \n         }\n        }, 0);\n        this.triggerNotification();\n      }) \n     if(localStorage.getItem(\"user_image\")!= null){\n      \n      this.imgPreview = localStorage.getItem(\"user_image\");\n      this.user_image = this.imgPreview;\n     }else{\n      \n      this.imgPreview = \"assets/imgs/profileIcon.jpg\";\n      this.user_image = null;\n    }\n    if(localStorage.getItem('user_name')!= 'null'){\n      this.prof_name = localStorage.getItem('user_name');\n    }\n   \n  }\n\n  ionViewDidLoad() {\n    console.log('ionViewDidLoad ProfilePage');\n  }\n  \n  \n  triggerNotification(){\n    this.oneSignal.startInit('b968edce-1541-4003-a09e-3a670becec2d', '812346685705');\n        this.oneSignal.inFocusDisplaying(this.oneSignal.OSInFocusDisplayOption.Notification);\n        this.oneSignal.getIds().then((id) => {\n         localStorage.setItem(\"player_id\", id.userId);\n     \n        });\n        this.oneSignal.setSubscription(true);\n        this.oneSignal.handleNotificationReceived().subscribe((data) => {\n        // handle received here how you wish.\n        }); \n        this.oneSignal.handleNotificationOpened().subscribe((result) => { \n          this.assignPush = JSON.stringify(result.notification.isAppInFocus);\n          this.getPushData = result.notification.payload.additionalData;\n          localStorage.setItem(\"action\", this.assignPush);\n\n          /*if(localStorage.getItem(\"action\") == 'false'){\n            \n          }else{*/\n            localStorage.setItem(\"noti_page\", this.getPushData.action);\n            if(this.getPushData.value!=undefined || this.getPushData.value!=null){\n              localStorage.setItem(\"ViewDetails\", this.getPushData.value.id);\n              localStorage.setItem(\"noti_genre_id\", this.getPushData.value.genre.id);\n              localStorage.setItem(\"noti_genre_type\", this.getPushData.value.genre.genre_type);\n              if(localStorage.getItem(\"noti_page\")==\"home\"){ \n               //this.app.getRootNav().setRoot('TabsPage',{tabIndex:0})\n               //this.navCtrl.parent.select(0);\n               this.nav.setRoot('TabsPage',{tabIndex:0})\n              }else{\n               //this.app.getRootNav().setRoot('TabsPage',{tabIndex:3})\n               //this.navCtrl.parent.select(3);\n               this.nav.setRoot('TabsPage',{tabIndex:3})\n              }\n            }else if(localStorage.getItem(\"noti_page\")==\"home\"){\n              //this.app.getRootNav().setRoot('TabsPage',{tabIndex:0}) \n              //this.navCtrl.parent.select(0);\n              this.nav.setRoot('TabsPage',{tabIndex:0})\n            }else{\n              //this.app.getRootNav().setRoot('TabsPage',{tabIndex:3}) \n              //this.navCtrl.parent.select(3);\n              this.nav.setRoot('TabsPage',{tabIndex:3})\n            }\n         /* }*/\n    \n      });\n      this.oneSignal.endInit();\n       \n      //this.oneSignal.setLogLevel({logLevel: 6, visualLevel: 6});\n  }\n\n  getPhoto() {\n    let options = {\n      maximumImagesCount: 1,\n      quality: 90,\n        width: 500, \n        height: 500\n    };\n    this.imagePicker.getPictures(options).then((results) => {\n      //this.user_image = null;\n      if(results.length!=0){\n        for (var i = 0; i < results.length; i++) {\n        \n          this.imgPreview = results[i];\n          this.user_image = null; \n          this.base64.encodeFile(results[i]).then((base64File: string) => {\n            this.image = base64File;\n          }, (err) => {\n            console.log(err);\n          });\n        }\n       }else{\n          if(this.user_image!=null){\n            this.imgPreview = localStorage.getItem(\"user_image\");\n          }else{\n            this.user_image = null;\n          }   \n       }  \n         \n    }, (err) => {console.log(err)});\n  }\n\n  dashboard(){\n    this.name = this.prof_name;\n    if(this.image != \"\" ){\n\n          let data = {\n              \"image\": this.image,\n              \"user_id\": localStorage.getItem(\"user_id\"),\n              \"user_name\": this.name \n          }\n          this.showLoader();\n          this.votes.register(data).subscribe((result) => {\n            let data = result;\n            this.loading.dismiss();\n            if(data.image.length!=0){\n                localStorage.setItem(\"user_image\", data.image[0].image_path.url);\n            }\n            localStorage.setItem(\"user_name\", data.first_name);\n            this.menu.user_id = data.id;\n                  this.menu.user_name = data.first_name;\n                  if(data.image.length!=0){\n                  this.menu.user_image = data.image[0].image_path.url;\n            }\n            this.toast.show(`Uploaded successfully`, '2000', 'bottom').subscribe(\n              toast => {\n                  console.log(toast);\n              }\n            );\n\n          }, (err) => {\n            this.loading.dismiss();\n            this.toast.show(`Uploading Failed`, '2000', 'bottom').subscribe(\n              toast => {\n                console.log(err);\n              }\n            );\n          });\n          }\n          this.navCtrl.setRoot(MenuPage);\n  }\n\n  back(){\n   this.navCtrl.setRoot(MenuPage); \n  }\n\n\n  showLoader(){\n  this.loading = this.loadingCtrl.create({\n      content: 'Uploading...'\n  });\n\n  this.loading.present();\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/profile/profile.ts"],"sourceRoot":""}